<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>010 - Regular Expression Matching</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        .string-display { display: flex; justify-content: center; gap: 5px; margin: 15px 0; flex-wrap: wrap; }
        .char-box { width: 45px; height: 50px; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 8px; font-size: 1.2rem; font-weight: bold; transition: all 0.3s ease; }
        .char-box.str { background: linear-gradient(135deg, #6366f1, #8b5cf6); color: white; }
        .char-box.pattern { background: linear-gradient(135deg, #10b981, #34d399); color: white; }
        .char-box.special { background: linear-gradient(135deg, #f59e0b, #ef4444); color: white; }
        .char-box.current { box-shadow: 0 0 15px #f59e0b; border: 2px solid #f59e0b; }
        .idx { font-size: 0.6rem; opacity: 0.7; margin-top: 3px; }
        #dpTable { display: flex; justify-content: center; overflow-x: auto; padding: 10px; }
        table { border-collapse: collapse; }
        th, td { width: 45px; height: 45px; text-align: center; border: 1px solid #e2e8f0; font-size: 0.9rem; }
        th { background: linear-gradient(135deg, #6366f1, #8b5cf6); color: white; }
        td { background: #f8fafc; transition: all 0.3s ease; color: #334155; }
        td.true { background: rgba(34, 197, 94, 0.3); color: #166534; font-weight: bold; }
        td.false { background: rgba(239, 68, 68, 0.1); color: #94a3b8; }
        td.current { box-shadow: inset 0 0 10px #f59e0b; border: 2px solid #f59e0b; }
        .legend { display: flex; justify-content: center; gap: 20px; margin-top: 15px; flex-wrap: wrap; }
        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: #64748b; }
        .legend-color { width: 20px; height: 20px; border-radius: 4px; }
        .result { font-size: 1.5rem; text-align: center; padding: 20px; border-radius: 8px; margin-top: 15px; }
        .result.match { background: rgba(34, 197, 94, 0.2); border: 2px solid #22c55e; color: #166534; }
        .result.nomatch { background: rgba(239, 68, 68, 0.2); border: 2px solid #ef4444; color: #dc2626; }
        input { background: #f8fafc; color: #334155; border: 1px solid #e2e8f0; padding: 10px; border-radius: 8px; font-size: 0.9rem; width: 120px; }
        input:focus { outline: none; border-color: #6366f1; }
        .info-box { background: #f1f5f9; border-radius: 8px; padding: 15px; margin-bottom: 15px; font-size: 0.9rem; line-height: 1.6; color: #475569; }
    </style>
</head>
<body>
    <div class="container">
        <section class="problem-info">
            <h1><span class="problem-number">#10</span> Regular Expression Matching</h1>
            <p>Implement regular expression matching with support for '.' and '*'. '.' matches any single character, '*' matches zero or more of the preceding element.</p>
            <div class="problem-meta">
                <span class="meta-tag">Hard</span>
                <span class="meta-tag">Dynamic Programming</span>
                <span class="meta-tag">String</span>
            </div>
            <div class="file-ref">
                üìÑ Python: <code>python/0010_regular_expression_matching/0010_regular_expression_matching.py</code>
            </div>

        </section>

        <div class="explanation-panel">
            <h4>üß† How It Works (Layman's Terms)</h4>
            <p>This algorithm solves the problem <strong>step by step</strong>:</p>
            <ul>
                <li><strong>Understand:</strong> Parse the input data</li>
                <li><strong>Process:</strong> Apply the core logic</li>
                <li><strong>Optimize:</strong> Use efficient data structures</li>
                <li><strong>Return:</strong> Output the computed result</li>
            </ul>
        </div>


        <section class="visualization-section">
            <h3>üé¨ Step-by-Step Visualization</h3>
            <div class="controls">
                <label>String: <input type="text" id="strInput" value="aab"></label>
                <label>Pattern: <input type="text" id="patternInput" value="c*a*b"></label>
                <button onclick="setInputs()">Set</button>
                <button id="stepBtn" onclick="step()">Step</button>
                <button id="autoBtn" onclick="toggleAuto()">‚ñ∂ Auto Run</button>
                <button onclick="reset()">Reset</button>
            </div>
        </section>

        <section class="visualization-section">
            <h3>üé¨ Step-by-Step Visualization</h3>
            <div class="info-box">
                <strong>'.'</strong> matches any single character. <strong>'*'</strong> matches zero or more of the preceding element.
            </div>
            <div>
                <div style="text-align: center; margin-bottom: 5px; color: #64748b;">String s:</div>
                <div class="string-display" id="strDisplay"></div>
            </div>
            <div style="margin-top: 15px;">
                <div style="text-align: center; margin-bottom: 5px; color: #64748b;">Pattern p:</div>
                <div class="string-display" id="patternDisplay"></div>
            </div>
        </section>

        <section class="visualization-section">
            <h3>üé¨ Step-by-Step Visualization</h3>
            <div id="dpTable"></div>
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: rgba(34, 197, 94, 0.3);"></div> True (Match)</div>
                <div class="legend-item"><div class="legend-color" style="background: rgba(239, 68, 68, 0.1);"></div> False (No Match)</div>
                <div class="legend-item"><div class="legend-color" style="background: rgba(251, 191, 36, 0.3);"></div> Currently Processing</div>
            </div>
            <div class="status-message" id="stepDisplay">Ready to start</div>
            <div id="resultArea"></div>
        </section>

        <section class="code-section">
            <h3>üíª Python Solution</h3>
            <div class="code-block">
                <pre><span class="keyword">def</span> <span class="function">isMatch</span>(s: <span class="class-name">str</span>, p: <span class="class-name">str</span>) -> bool:
    m, n = <span class="function">len</span>(s), <span class="function">len</span>(p)
    
    <span class="comment"># dp[i][j] = does s[0:i] match p[0:j]?</span>
    dp = [[<span class="keyword">False</span>] * (n + <span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="function">range</span>(m + <span class="number">1</span>)]
    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="keyword">True</span>  <span class="comment"># Empty pattern matches empty string</span>
    
    <span class="comment"># Handle patterns like a*, a*b*, a*b*c* matching empty string</span>
    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="function">range</span>(<span class="number">2</span>, n + <span class="number">1</span>):
        <span class="keyword">if</span> p[j-<span class="number">1</span>] == <span class="string">'*'</span>:
            dp[<span class="number">0</span>][j] = dp[<span class="number">0</span>][j-<span class="number">2</span>]
    
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">1</span>, m + <span class="number">1</span>):
        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="function">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):
            <span class="keyword">if</span> p[j-<span class="number">1</span>] == <span class="string">'*'</span>:
                <span class="comment"># Zero occurrences: skip pattern char and *</span>
                dp[i][j] = dp[i][j-<span class="number">2</span>]
                <span class="comment"># One or more: if current chars match, check s[:-1]</span>
                <span class="keyword">if</span> p[j-<span class="number">2</span>] == <span class="string">'.'</span> <span class="keyword">or</span> p[j-<span class="number">2</span>] == s[i-<span class="number">1</span>]:
                    dp[i][j] = dp[i][j] <span class="keyword">or</span> dp[i-<span class="number">1</span>][j]
            <span class="keyword">elif</span> p[j-<span class="number">1</span>] == <span class="string">'.'</span> <span class="keyword">or</span> p[j-<span class="number">1</span>] == s[i-<span class="number">1</span>]:
                <span class="comment"># Direct match or wildcard</span>
                dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>]
    
    <span class="keyword">return</span> dp[m][n]</pre>
            </div>
        </section>
    </div>

    <script>
        let s = "aab";
        let p = "c*a*b";
        let dp = [];
        let steps = [];
        let stepIndex = 0;
        let autoInterval = null;
        let isComplete = false;

        function setInputs() {
            s = document.getElementById('strInput').value;
            p = document.getElementById('patternInput').value;
            reset();
        }

        function reset() {
            const m = s.length, n = p.length;
            dp = Array(m + 1).fill(null).map(() => Array(n + 1).fill(false));
            steps = [];
            stepIndex = 0;
            isComplete = false;
            
            if (autoInterval) {
                clearInterval(autoInterval);
                autoInterval = null;
                document.getElementById('autoBtn').textContent = '‚ñ∂ Auto Run';
            }
            
            steps.push({ i: 0, j: 0, value: true, desc: "Empty pattern matches empty string" });
            
            for (let j = 2; j <= n; j++) {
                if (p[j-1] === '*') {
                    steps.push({ i: 0, j: j, value: true, checkJ: j-2, desc: `Pattern "${p.substring(0,j)}" can match empty string (skip ${p[j-2]}*)` });
                }
            }
            
            for (let i = 1; i <= m; i++) {
                for (let j = 1; j <= n; j++) {
                    if (p[j-1] === '*') {
                        let zeroMatch = false;
                        if (j >= 2) zeroMatch = steps.find(st => st.i === i && st.j === j-2)?.value || false;
                        
                        let oneMore = false;
                        if (j >= 2 && (p[j-2] === '.' || p[j-2] === s[i-1])) {
                            oneMore = steps.find(st => st.i === i-1 && st.j === j)?.value || false;
                        }
                        
                        const val = zeroMatch || oneMore;
                        let desc = `'*': Zero occur (dp[${i}][${j-2}]=${zeroMatch})`;
                        if (j >= 2 && (p[j-2] === '.' || p[j-2] === s[i-1])) {
                            desc += ` OR one+ (dp[${i-1}][${j}]=${oneMore})`;
                        }
                        steps.push({ i, j, value: val, desc });
                    } else if (p[j-1] === '.' || p[j-1] === s[i-1]) {
                        const prev = steps.find(st => st.i === i-1 && st.j === j-1)?.value || false;
                        steps.push({ i, j, value: prev, desc: `'${p[j-1]}' matches '${s[i-1]}': dp[${i-1}][${j-1}]=${prev}` });
                    } else {
                        steps.push({ i, j, value: false, desc: `'${p[j-1]}' ‚â† '${s[i-1]}': no match` });
                    }
                }
            }
            render();
        }

        function step() {
            if (isComplete || stepIndex >= steps.length) {
                isComplete = true;
                render();
                return;
            }
            const st = steps[stepIndex];
            dp[st.i][st.j] = st.value;
            stepIndex++;
            render();
        }

        function toggleAuto() {
            if (autoInterval) {
                clearInterval(autoInterval);
                autoInterval = null;
                document.getElementById('autoBtn').textContent = '‚ñ∂ Auto Run';
            } else {
                autoInterval = setInterval(() => {
                    if (stepIndex >= steps.length) {
                        clearInterval(autoInterval);
                        autoInterval = null;
                        document.getElementById('autoBtn').textContent = '‚ñ∂ Auto Run';
                        isComplete = true;
                        render();
                    } else {
                        step();
                    }
                }, 500);
                document.getElementById('autoBtn').textContent = '‚è∏ Pause';
            }
        }

        function render() {
            const m = s.length, n = p.length;
            
            let strHtml = '<div class="char-box str" style="background: #94a3b8;"><span>Œµ</span><span class="idx">0</span></div>';
            for (let i = 0; i < s.length; i++) {
                strHtml += `<div class="char-box str"><span>${s[i]}</span><span class="idx">${i+1}</span></div>`;
            }
            document.getElementById('strDisplay').innerHTML = strHtml;
            
            let patHtml = '<div class="char-box pattern" style="background: #94a3b8;"><span>Œµ</span><span class="idx">0</span></div>';
            for (let j = 0; j < p.length; j++) {
                const isSpecial = p[j] === '.' || p[j] === '*';
                patHtml += `<div class="char-box ${isSpecial ? 'special' : 'pattern'}"><span>${p[j]}</span><span class="idx">${j+1}</span></div>`;
            }
            document.getElementById('patternDisplay').innerHTML = patHtml;
            
            let tableHtml = '<table><tr><th></th><th>Œµ</th>';
            for (let j = 0; j < n; j++) tableHtml += `<th>${p[j]}</th>`;
            tableHtml += '</tr>';
            
            for (let i = 0; i <= m; i++) {
                tableHtml += `<tr><th>${i === 0 ? 'Œµ' : s[i-1]}</th>`;
                for (let j = 0; j <= n; j++) {
                    const isCurrent = stepIndex > 0 && stepIndex <= steps.length && 
                                      steps[stepIndex-1].i === i && steps[stepIndex-1].j === j;
                    const cellClass = isCurrent ? 'current' : (dp[i][j] ? 'true' : 'false');
                    tableHtml += `<td class="${cellClass}">${dp[i][j] ? 'T' : 'F'}</td>`;
                }
                tableHtml += '</tr>';
            }
            tableHtml += '</table>';
            document.getElementById('dpTable').innerHTML = tableHtml;
            
            const stepDisplay = document.getElementById('stepDisplay');
            if (stepIndex > 0 && stepIndex <= steps.length) {
                const st = steps[stepIndex - 1];
                stepDisplay.textContent = `dp[${st.i}][${st.j}] = ${st.value}: ${st.desc}`;
            } else if (isComplete) {
                stepDisplay.textContent = `Complete!`;
            } else {
                stepDisplay.textContent = 'Ready to start';
            }
            stepDisplay.className = 'status-message';
            
            if (isComplete) {
                const match = dp[m][n];
                document.getElementById('resultArea').innerHTML = `
                    <div class="result ${match ? 'match' : 'nomatch'}">
                        ${match ? '‚úÖ Pattern matches!' : '‚ùå No match'}
                    </div>`;
            } else {
                document.getElementById('resultArea').innerHTML = '';
            }
        }

        reset();
    </script>
</body>
</html>
